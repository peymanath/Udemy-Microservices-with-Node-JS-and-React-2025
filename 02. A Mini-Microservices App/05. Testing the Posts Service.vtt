WEBVTT

00:01.630 --> 00:04.310
خب، سرویس پست ما تا اینجا کامل شده.

00:04.330 --> 00:06.040
حالا وقتشه که تستش کنیم.

00:06.250 --> 00:10.210
البته بعداً توی دوره، می‌ریم سراغ نوشتن تست‌های خودکار (automated tests)

00:10.210 --> 00:13.060
تا مطمئن بشیم همه‌ی سرویس‌هامون درست کار می‌کنن.

00:13.090 --> 00:17.770
تست خودکار تو معماری میکروسرویس خیلی مهمه و مفصل راجع بهش صحبت خواهیم کرد.

00:17.770 --> 00:18.280
اما الان،

00:18.490 --> 00:23.360
برای این سرویس اولیه، می‌خوایم به صورت دستی تستش کنیم. برای این کار، از یک کلاینت ساده‌ی API استفاده می‌کنیم.

00:23.380 --> 00:25.960
مثلاً برنامه Postman.

00:26.320 --> 00:32.650
پس می‌رم سراغ Postman و ابزار تست API اون رو باز می‌کنم.

00:32.800 --> 00:38.200
این یه اپ دسکتاپ کوچیکه که می‌تونی باهاش درخواست‌های مختلف به هر endpointی بفرستی.

00:40.100 --> 00:44.720
ما از Postman استفاده می‌کنیم تا سرویس کوچیکی که ساختیم رو تست کنیم و وقتمون تلف نشه.

00:44.720 --> 00:46.130
اما نصبش اجباری نیست.

00:46.250 --> 00:49.760
اگه نمی‌خوای Postman رو نصب کنی، مشکلی نیست.

00:49.790 --> 00:50.940
کاملاً اختیاریه.

00:50.960 --> 00:56.270
من فقط می‌خوام مطمئن بشم سرویس‌مون درست کار می‌کنه، پس اگه هنوز نصبش نکردی، برو و نصبش کن.

00:56.270 --> 00:57.560
بعدش ادامه می‌دیم.

00:57.860 --> 01:02.270
بعد از نصب، برنامه رو باز کن. یه پنجره مثل تصویر زیر می‌بینی.

01:03.350 --> 01:08.660
تو این پنجره، از بالا سمت چپ یه تب جدید باز می‌کنیم و درخواست دلخواهمون به API پست‌ها رو تنظیم می‌کنیم.

01:12.530 --> 01:15.350
من اول از همه می‌خوام یک پست جدید بسازم.

01:15.380 --> 01:19.040
پس متد درخواست رو می‌ذارم روی POST.

01:19.860 --> 01:24.960
و آدرس درخواست رو می‌نویسم: `http://localhost:4000/posts`

01:26.720 --> 01:28.490
بعد می‌رم تب Headers.

01:29.060 --> 01:33.410
یه هدر اضافه می‌کنم با کلید `Content-Type`

01:34.480 --> 01:37.780
و مقدارش رو می‌ذارم `application/json`

01:39.170 --> 01:43.460
حالا باید توی بدنه‌ی درخواست (body) عنوان پست رو مشخص کنیم.

01:44.690 --> 01:46.310
می‌رم به تب Body.

01:47.080 --> 01:52.030
گزینه RAW رو انتخاب می‌کنم و از منوی سمت راست گزینه `JSON` رو انتخاب می‌کنم.

01:53.710 --> 01:57.610
حالا یه داده‌ی JSON می‌نویسیم برای ارسال به API.

01:58.470 --> 02:00.510
یه جفت آکولاد باز و بسته می‌کنم.

02:02.180 --> 02:06.440
داخلش یه کلید می‌نویسم، چون داریم JSON می‌نویسیم نه جاوااسکریپت.

02:06.450 --> 02:07.730
و مقدارش رو می‌ذارم:

02:12.910 --> 02:16.000
وقتی همه چیز رو وارد کردم، روی دکمه Send کلیک می‌کنم تا درخواست ارسال بشه.

02:16.240 --> 02:22.690
پایین صفحه باید وضعیت پاسخ رو ببینم که نوشته 201 Created و همچنین ID و title پستی که ساختیم رو هم نشون می‌ده.

02:22.690 --> 02:25.600
اوضاع خوب به نظر می‌رسه.

02:26.190 --> 02:27.370
خب، بریم یه تست دیگه هم بگیریم.

02:28.480 --> 02:29.800
این بار می‌خوایم همه پست‌هایی که ساختیم رو دریافت کنیم.

02:29.800 --> 02:32.920
پس یه تب جدید توی Postman باز می‌کنم.

02:33.460 --> 02:36.370
و مطمئن می‌شم که درخواستم از نوع GET باشه.

02:37.470 --> 02:39.630
آدرس رو می‌نویسم:

02:40.170 --> 02:44.190
`http://localhost:4000/posts`

02:45.460 --> 02:46.600
بعد می‌رم تب Headers

02:47.660 --> 02:50.810
و یه هدر `Content-Type` با مقدار `application/json` وارد می‌کنم.

02:52.350 --> 02:53.610
توی این نوع درخواست، body لازم نیست.

02:56.970 --> 03:00.900
حالا روی Send می‌زنم.

03:01.140 --> 03:02.730
و نتیجه برمی‌گرده.

03:03.360 --> 03:04.070
همین شد.

03:04.080 --> 03:08.670
حالا می‌تونم پست‌هایی که ساختیم رو به صورت یک آبجکت بزرگ توی پاسخ ببینم.

03:09.330 --> 03:11.550
پس به نظر می‌رسه که سرویس به درستی کار می‌کنه.

03:11.580 --> 03:15.810
فقط یه نکته مهم: اگه هر تغییری توی کدت بدی، سرور دوباره راه‌اندازی میشه.

03:15.810 --> 03:16.830
و چون پست‌ها در حافظه ذخیره شدن،

03:16.830 --> 03:21.150
با ریستارت شدن سرور، همه پست‌ها پاک می‌شن.

03:21.480 --> 03:26.670
مثلاً اگه الان برم توی ادیتور و فقط یه کامنت ساده توی فایل ذخیره کنم، nodemon باعث میشه سرور ری‌استارت بشه.

03:26.670 --> 03:31.070
و اگه بعدش دوباره درخواست GET بزنم، می‌بینم که هیچ پستی موجود نیست.

03:31.560 --> 03:35.940
پس یادت باشه که با هر تغییر در کد، داده‌ها از بین می‌رن.

03:35.940 --> 03:37.200
مورد مهمیه برای پروژه‌های در حال توسعه.

03:37.200 --> 03:37.950
خلاصه،

03:37.950 --> 03:40.890
سرویس پست ما الان به‌درستی کار می‌کنه.

03:41.890 --> 03:42.180
خب،

03:42.190 --> 03:45.490
ما قرار نیست در طول دوره خیلی با تست دستی کار کنیم.

03:45.490 --> 03:48.190
تست دستی فقط برای این بخش ابتدایی بود.

03:48.400 --> 03:50.380
توی ادامه، بیشتر تمرکز روی تست خودکاره.

03:50.380 --> 03:53.050
خب، الان یه استراحت می‌کنیم

03:53.140 --> 03:54.640
و در ویدیوی بعدی می‌ریم سراغ ساخت سرویس کامنت.

03:54.640 --> 03:55.810
و احتمالاً تست کردنش با Postman رو

03:55.810 --> 03:59.500
می‌ذارم به عهده خودت که خیلی سریع انجامش بدی و مطمئن شی سرویس کامنت هم درست کار می‌کنه.

04:03.970 --> 04:04.450
تا ویدیو بعد!
